<!DOCTYPE html>
<html lang="fr">
    <head>
        <link rel="stylesheet" href="/app" type="text/css">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
    </head>

    <body>
        <div id="login">
          <h1 class="center">Datalk</h1>
            <form id="connect-form">
              <label for="username">Username : </label>
              <input type="text" id="username" name="username">
              <button type="submit" id="connect">Connect</button>
            </form>
            <div id="auth-fail"></div>
        </div>

        <div id="chat">
            <ul id="messages"></ul>
            <ul id="users"></ul>
            <form id="message-form">
              <input id="message-input" />
            </form>
        </div>

        <script>
          $(document).ready(function(){
            var socket = io.connect('http://localhost');
             $('#username').focus();

             $('#connect').click(function(e) {
              e.preventDefault();
              var nickname = $("#username").val();

              if(nickname) {
                socket.emit('login', nickname, function(success) {
                  $('#login').hide();
                  $('#chat').show();
                  $('#message-input').focus();
                });
              } else {
                $('#auth-fail').html("Please, enter your name.");
              }
            });

            $('#message-form').submit(function(e) {
              e.preventDefault();
            });
           
          });
        </script>
    </body>
</html>
